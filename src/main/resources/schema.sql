DROP TABLE IF EXISTS wish;
DROP TABLE IF EXISTS gift_option;
DROP TABLE IF EXISTS gift;
DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS category;
CREATE TABLE category
(
    `id`          BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    `name`        VARCHAR(255) NOT NULL UNIQUE,
    `color`       VARCHAR(255) NOT NULL,
    `imageUrl`    VARCHAR(255) NOT NULL,
    `description` VARCHAR(255) NOT NULL
);

create table gift
(
    `id`          BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    `name`        VARCHAR(255) NOT NULL,
    `price`       INT          NOT NULL,
    `imageUrl`    VARCHAR(255) NOT NULL,
    `category_id` BIGINT       NOT NULL,
    FOREIGN KEY (category_id) REFERENCES category (id)

);
CREATE TABLE gift_option
(
    `id`       BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    `name`     VARCHAR(255) NOT NULL UNIQUE,
    `quantity` INT          NOT NULL,
    `gift_id`  BIGINT,
    `version`  INT DEFAULT 0,
    FOREIGN KEY (gift_id) REFERENCES gift (id)
);
CREATE TABLE users
(
    `id`       BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    `email`    VARCHAR(255) NOT NULL UNIQUE,
    `password` VARCHAR(255) NOT NULL
);

CREATE TABLE wish
(
    `id`       BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    `user_id`  BIGINT NOT NULL,
    `gift_id`  BIGINT NOT NULL,
    `quantity` INT    NOT NULL DEFAULT 1,
    FOREIGN KEY (user_id) REFERENCES users (id),
    FOREIGN KEY (gift_id) REFERENCES gift (id)
);
